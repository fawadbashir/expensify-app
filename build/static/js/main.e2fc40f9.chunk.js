(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{176:function(e,t,n){e.exports=n(298)},220:function(e,t){},267:function(e,t,n){},294:function(e,t,n){},298:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(19),c=n.n(o),i=n(12),s=n(41),u=n(21),l=n(27),p=n(53),d=n.n(p),f=n(6),m=n.n(f),E=n(74),h=n.n(E),b=n(42),g=n.n(b),O=function(e){var t=e.id,n=e.description,r=e.amount,o=e.createdAt;return a.a.createElement(g.a.Body,{style:{borderBottom:"1px solid #e5e5e5"}},a.a.createElement(l.a,{className:"list-group-item-action",to:"/edit/".concat(t)},a.a.createElement(g.a.Title,{bg:"dark",as:"h3"},n)),a.a.createElement(g.a.Subtitle,{className:"mt-4"}," ",m()(o).format("MMMM do YYYY"),a.a.createElement(g.a.Text,{as:"span",className:"float-right "},h()(r/100).format("$0,0.00"))))},v=function(e,t){var n=t.text,r=t.sortBy,a=t.startDate,o=t.endDate;return e.filter(function(e){var t=m()(e.createdAt),r=!a||a.isSameOrBefore(t,"day"),c=!o||o.isSameOrAfter(t,"day"),i=e.description.toLowerCase().includes(n.toLowerCase());return r&&c&&i}).sort(function(e,t){return"date"===r?e.createdAt<t.createdAt?1:-1:"amount"===r?e.amount<t.amount?1:-1:void 0})},y=Object(i.b)(function(e){return{expenses:v(e.expenses,e.filters)}})(function(e){return a.a.createElement("div",null,0===e.expenses.length?a.a.createElement("p",null,"No Expenses"):a.a.createElement(a.a.Fragment,null,a.a.createElement(g.a,null,a.a.createElement(g.a.Header,null,a.a.createElement("span",null,"Expense"),a.a.createElement("span",{className:"float-right"},"Amount")),e.expenses.map(function(e){return a.a.createElement(O,Object.assign({key:e.id},e))}))))}),j=n(36),x=n(37),A=n(39),D=n(38),S=n(40),_=n(301),w=n(75),P=function(e){function t(){var e,n;Object(j.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(A.a)(this,(e=Object(D.a)(t)).call.apply(e,[this].concat(a)))).state={focusedInput:null},n.onDatesChange=function(e){var t=e.startDate,r=e.endDate;n.props.setStartDate(t),n.props.setEndDate(r)},n.onFocusChange=function(e){n.setState(function(){return{focusedInput:e}})},n.onTextChange=function(e){n.props.setTextFilter(e.target.value)},n.onSortBy=function(e){"date"===e.target.value?n.props.sortByDate():n.props.sortByAmount()},n}return Object(S.a)(t,e),Object(x.a)(t,[{key:"render",value:function(){return a.a.createElement(_.a,{className:"mt-3 mb-4"},a.a.createElement("input",{style:{padding:"12px",marginRight:"12px"},as:"input",type:"text",value:this.props.filters.text,onChange:this.onTextChange}),a.a.createElement("select",{className:"custom-select btn-mini",style:{marginRight:"12px"},value:this.props.filters.sortBy,onChange:this.onSortBy},a.a.createElement("option",{value:"date"},"Date"),a.a.createElement("option",{value:"amount"},"Amount")),a.a.createElement(w.DateRangePicker,{regular:!0,noBorder:!0,startDate:this.props.filters.startDate,startDateId:"123abc",endDate:this.props.filters.endDate,endDateId:"abc123",onDatesChange:this.onDatesChange,focusedInput:this.state.focusedInput,onFocusChange:this.onFocusChange,isOutsideRange:function(){return!1},numberOfMonths:1}))}}]),t}(r.Component),C=Object(i.b)(function(e){return{filters:e.filters}},function(e){return{setTextFilter:function(t){return e(function(){return{type:"SET_TEXT_FILTER",text:arguments.length>0&&void 0!==arguments[0]?arguments[0]:""}}(t))},sortByDate:function(){return e({type:"SORT_BY_DATE"})},sortByAmount:function(){return e({type:"SORT_BY_AMOUNT"})},setStartDate:function(t){return e(function(e){return{type:"SET_START_DATE",startDate:e}}(t))},setEndDate:function(t){return e(function(e){return{type:"SET_END_DATE",endDate:e}}(t))}}})(P),T={fontWeight:500},N=Object(i.b)(function(e){return{expenses:v(e.expenses,e.filters)}})(function(e){var t,n=h()((t=e.expenses,(0===t.length?0:t.map(function(e){return e.amount}).reduce(function(e,t){return e+t},0))/100)).format("$0,0.00"),r=1===e.expenses.length?"Expense":"Expenses";return a.a.createElement("div",null,a.a.createElement("h1",{style:{fontSize:"2rem",fontWeight:300}},"Viewing ",a.a.createElement("span",{style:T},e.expenses.length," "),a.a.createElement("span",{style:T},r)," of Total ",a.a.createElement("span",{style:T},n)))}),R=function(){return a.a.createElement("div",null,a.a.createElement("div",{className:"pt-3 full-width-body",style:{marginBottom:"0.5rem",padding:"0.5rem 0"}},a.a.createElement(N,null),a.a.createElement(l.a,{to:"/create"},a.a.createElement(d.a,{size:"lg",className:" mt-3",style:{fontSize:"18px",backgroundColor:"#3D9970",color:"white",border:"none",padding:"10px"}},"Add Expense"))),a.a.createElement(C,null),a.a.createElement(y,null))},k=(n(253),n(266),n(267),n(302)),B=n(303),I=n(304),L=function(e){function t(e){var n;return Object(j.a)(this,t),(n=Object(A.a)(this,Object(D.a)(t).call(this,e))).onDescriptionChange=function(e){var t=e.target.value;n.setState(function(){return{description:t}})},n.onNoteChange=function(e){var t=e.target.value;n.setState(function(){return{note:t}})},n.onAmountChange=function(e){var t=e.target.value;t&&!t.match(/^\d{1,}(\.\d{0,2})?$/)||n.setState(function(){return{amount:t}})},n.onDateChange=function(e){e&&n.setState(function(){return{createdAt:e}})},n.onFocusChange=function(e){var t=e.focused;n.setState(function(){return{calendarFocused:t}})},n.onSubmit=function(e){e.preventDefault(),n.state.description&&n.state.amount?(n.setState(function(){return{error:""}}),n.props.onSubmit({description:n.state.description,amount:100*parseFloat(n.state.amount,10),createdAt:n.state.createdAt.valueOf(),note:n.state.note})):n.setState(function(){return{error:"Please provide description and amount"}})},n.state={description:n.props.expense?e.expense.description:"",note:n.props.expense?e.expense.note:"",amount:n.props.expense?(e.expense.amount/100).toString():"",createdAt:n.props.expense?m()(e.expense.createdAt):m()(),calendarFocused:!1,error:""},n}return Object(S.a)(t,e),Object(x.a)(t,[{key:"render",value:function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(k.a,null,a.a.createElement("h1",null,"Add Expense")),a.a.createElement(B.a,{onSubmit:this.onSubmit},this.state.error&&a.a.createElement("p",null,this.state.error),a.a.createElement(B.a.Group,null,a.a.createElement(B.a.Control,{as:"input",type:"text",placeholder:"Description",autoFocus:!0,value:this.state.description,onChange:this.onDescriptionChange})),a.a.createElement(B.a.Group,null,a.a.createElement(B.a.Control,{as:"input",type:"number",placeholder:"Amount",value:this.state.amount,onChange:this.onAmountChange})),a.a.createElement(B.a.Group,null,a.a.createElement(w.SingleDatePicker,{date:this.state.createdAt,onDateChange:this.onDateChange,focused:this.state.calendarFocused,onFocusChange:this.onFocusChange,numberOfMonths:1,isOutsideRange:function(){return!1}}),a.a.createElement(B.a.Group,null,a.a.createElement(B.a.Control,{as:"textarea",placeholder:"Add a note for your expense(optional)",value:this.state.note,onChange:this.onNoteChange}),a.a.createElement("style",null,"\n                        \n                        .btn-flat {\n                            background-color : purple;\n                            color:white\n                        }\n                            \n                        "),a.a.createElement(I.a,{variant:"primary",type:"submit",bsPrefix:"btn btn-lg btn-flat mt-3"},"Save Expense")))))}}]),t}(r.Component),F=n(31),U=n.n(F),G=n(54),M=n(64),X=n(63),V=(n(269),n(271),{apiKey:Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_FIREBASE_API_KEY,authDomain:Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_AUTH_DOMAIN,databaseURL:Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_FIREBASE_DATABASE_URL,projectId:Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_FIREBASE_PROJECT_ID,storageBucket:Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_FIREBASE_STORAGE_BUCKET,messagingSenderId:Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_FIREBASE_MESSAGING_SENDING_ID});X.initializeApp(V);var W=X.database(),Y=new X.auth.GoogleAuthProvider;function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(n,!0).forEach(function(t){Object(G.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var H=function(e){return{type:"ADD_EXPENSE",expense:e}},J=function(){return{type:"REMOVE_EXPENSE",id:(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).id}},K=function(e,t){return{type:"EDIT_EXPENSE",id:e,updates:t}},q=function(e){return{type:"SET_EXPENSES",expenses:e}},Q=function(e){function t(){var e,n;Object(j.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(A.a)(this,(e=Object(D.a)(t)).call.apply(e,[this].concat(a)))).onSubmit=function(e){n.props.startAddExpense(e),n.props.history.push("/dashboard")},n}return Object(S.a)(t,e),Object(x.a)(t,[{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement(L,{onSubmit:this.onSubmit}))}}]),t}(r.Component),Z=Object(i.b)(void 0,function(e){return{startAddExpense:function(t){return e(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(){var t=Object(M.a)(U.a.mark(function t(n,r){var a,o,c,i,s,u,l,p,d,f;return U.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=r().auth.uid,console.log(r()),o=e.description,c=void 0===o?"":o,i=e.note,s=void 0===i?"":i,u=e.amount,l=void 0===u?0:u,p=e.createdAt,d={description:c,note:s,amount:l,createdAt:void 0===p?0:p},t.next=6,W.ref("users/".concat(a,"/expenses")).push(d);case 6:f=t.sent,n(H($({id:f.key},d)));case 8:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()}(t))}}})(Q),ee=function(e){function t(){var e,n;Object(j.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(A.a)(this,(e=Object(D.a)(t)).call.apply(e,[this].concat(a)))).onSubmit=function(e){n.props.startEditExpense(n.props.expense.id,e),n.props.history.push("/dashboard")},n.onClick=function(){n.props.startRemoveExpense({id:n.props.expense.id}),n.props.history.push("/dashboard")},n}return Object(S.a)(t,e),Object(x.a)(t,[{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement(L,{expense:this.props.expense,onSubmit:this.onSubmit}),a.a.createElement("button",{onClick:this.onClick},"Remove"))}}]),t}(r.Component),te=Object(i.b)(function(e,t){return{expense:e.expenses.find(function(e){return e.id===t.match.params.id})}},function(e){return{startEditExpense:function(t,n){return e(function(e,t){return function(){var n=Object(M.a)(U.a.mark(function n(r,a){var o;return U.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return o=a().auth.uid,n.next=3,W.ref("users/".concat(o,"/expenses/").concat(e)).update(t);case 3:r(K(e,t));case 4:case"end":return n.stop()}},n)}));return function(e,t){return n.apply(this,arguments)}}()}(t,n))},startRemoveExpense:function(t){return e(function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).id;return function(){var t=Object(M.a)(U.a.mark(function t(n,r){var a;return U.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=r().auth.uid,t.next=3,W.ref("users/".concat(a,"/expenses/").concat(e)).remove();case 3:n(J({id:e}));case 4:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()}({id:t.id}))}}})(ee),ne=n(169),re=n.n(ne),ae=n(170),oe=n.n(ae),ce=n(171),ie=n.n(ce),se=function(e){return a.a.createElement(re.a,null,a.a.createElement(oe.a,{className:"justify-content-md-center"},a.a.createElement(ie.a,{lg:"8",xs:"12",md:"12",span:{span:!0}},e.children)))},ue=function(){return a.a.createElement(se,null,"404 - ",a.a.createElement(l.a,{to:"/"},"Go Home"))},le=Object(i.b)(void 0,function(){return{startLogin:function(){return function(){return X.auth().signInWithPopup(Y)}}}})(function(e){return a.a.createElement("div",{className:"box-layout"},a.a.createElement(d.a,{size:"lg",onClick:e.startLogin()}," Login"))}),pe=n(76),de=n(96),fe=n.n(de),me=n(172),Ee=n.n(me),he=Object(i.b)(void 0,function(e){return{startLogout:function(){return e(function(){return X.auth().signOut()})}}})(function(e){return console.log(e.name),a.a.createElement(a.a.Fragment,null,a.a.createElement(fe.a,{variant:"dark",bg:"dark"},a.a.createElement(l.a,{className:"ml-lg-5",to:"/dashboard"},a.a.createElement(fe.a.Brand,null,"Expensify")),a.a.createElement(Ee.a,{className:"ml-auto"}),a.a.createElement(d.a,{className:"",onClick:e.startLogout,variant:"dark"},"Logout")))}),be=Object(i.b)(function(e){return{isAuthenticated:!e.uid}})(function(e){var t=e.isAuthenticated,n=e.component,o=Object(pe.a)(e,["isAuthenticated","component"]);return a.a.createElement(s.b,Object.assign({},o,{component:function(e){return t?a.a.createElement(r.Fragment,null,a.a.createElement(he,null),a.a.createElement(se,null,a.a.createElement(n,e))):a.a.createElement(s.a,{to:"/"})}}))}),ge=Object(i.b)(function(e){return{isAuthenticated:!!e.uid}})(function(e){var t=e.isAuthenticated,n=e.component,r=Object(pe.a)(e,["isAuthenticated","component"]);return a.a.createElement(s.b,Object.assign({},r,{component:function(e){return t?a.a.createElement(s.a,{to:"/dashboard"}):a.a.createElement(n,e)}}))}),Oe=Object(u.a)(),ve=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(s.c,{history:Oe},a.a.createElement(s.d,null,a.a.createElement(ge,{path:"/",exact:!0,component:le}),a.a.createElement(be,{path:"/dashboard",component:R}),a.a.createElement(be,{path:"/create",component:Z}),a.a.createElement(be,{path:"/edit/:id",component:te}),a.a.createElement(s.b,{component:ue}))))},ye=n(45),je=n(173),xe=n(174);function Ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var De=[],Se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:De,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_EXPENSE":return[].concat(Object(xe.a)(e),[t.expense]);case"REMOVE_EXPENSE":return e.filter(function(e){return e.id!==t.id});case"EDIT_EXPENSE":return e.map(function(e){return e.id===t.id?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ae(n,!0).forEach(function(t){Object(G.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ae(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e,{},t.updates):e});case"SET_EXPENSES":return t.expenses;default:return e}};function _e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function we(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_e(n,!0).forEach(function(t){Object(G.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_e(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Pe={text:"",sortBy:"date",startDate:m()().startOf("month"),endDate:m()().endOf("month")},Ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TEXT_FILTER":return we({},e,{text:t.text});case"SORT_BY_DATE":return we({},e,{sortBy:"date"});case"SORT_BY_AMOUNT":return we({},e,{sortBy:"amount"});case"SET_START_DATE":return we({},e,{startDate:t.startDate});case"SET_END_DATE":return we({},e,{endDate:t.endDate});default:return e}},Te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return{uid:t.uid};case"LOGOUT":return{};default:return e}},Ne=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ye.d,Re=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ke(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}n(294);n(295).config();var Be=Object(ye.e)(Object(ye.c)({expenses:Se,filters:Ce,auth:Te}),Ne(Object(ye.a)(je.a)));c.a.render(a.a.createElement("h1",null,"Loading..."),document.getElementById("root"));var Ie=!1,Le=function(){Ie||(c.a.render(a.a.createElement(i.a,{store:Be}," ",a.a.createElement(ve,null)," "),document.getElementById("root")),Ie=!0)};X.auth().onAuthStateChanged(function(e){e?(Be.dispatch({type:"LOGIN",uid:e.uid}),Be.dispatch(function(){var e=Object(M.a)(U.a.mark(function e(t,n){var r,a,o;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n().auth.uid,e.next=3,W.ref("users/".concat(r,"/expenses")).once("value");case 3:a=e.sent,o=[],a.forEach(function(e){o.push($({id:e.key},e.val()))}),console.log(o),t(q(o));case 8:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()).then(function(){console.log(e.uid),Le(),"/"===Oe.location.pathname&&Oe.push("/dashboard")}),console.log("Login")):(Be.dispatch({type:"LOGOUT"}),Le(),Oe.push("/"),console.log("logout"))}),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");Re?(function(e,t){fetch(e).then(function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):ke(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):ke(t,e)})}}()}},[[176,1,2]]]);
//# sourceMappingURL=main.e2fc40f9.chunk.js.map